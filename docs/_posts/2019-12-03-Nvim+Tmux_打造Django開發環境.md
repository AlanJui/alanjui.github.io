---
title: Nvim + Tmux æ‰“é€  Django é–‹ç™¼ç’°å¢ƒ
date: 2019-12-03 22:00:00
summary: ä½¿ç”¨ Nvim èˆ‡ Tmux ï¼Œæ‰“é€ å€‹äººåŒ–ï¼Œé©ç”¨æ–¼ Django Frameworkï¼ˆPythonèªè¨€ï¼‰çš„ã€Œè»Ÿé«”é–‹ç™¼ç’°å¢ƒã€ã€‚
sidebar: auto
tags:
    - Nvim
    - Tmux
    - Django
    - Python
---

## è»Ÿé«”é–‹ç™¼è€…æ‰“é€ ç’°å¢ƒçš„éœ€æ±‚

å¾è»Ÿé«”é–‹ç™¼è€…çš„å·¥ä½œæµç¨‹ï¼Œè§€å¯Ÿä½œæ¥­æ‡‰ç”¨çš„ä½¿ç”¨è€…éœ€æ±‚ï¼›å…¼è«‡ Tmux èˆ‡ Vim å·¥å…·èƒ½æä¾›çš„åŠŸèƒ½ç‰¹æ€§ã€‚

<iframe width="560" height="315" src="https://www.youtube.com/embed/sSOfr2MtRU8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


## ä»¥ VS Code ç‚ºå¸«ï¼Œä½¿ç”¨ Vim + Tmux æ‰“é€ é–‹ç™¼ç’°å¢ƒ

å°æ–¼ç”¨é VS Code çš„ä½¿ç”¨è€…ï¼Œæƒ³è¦é€é Vim + Tmux æ‰“é€ å€‹äººåŒ–é–‹ç™¼ç’°å¢ƒæ™‚ï¼Œè©²æ€éº¼åšã€æ‡‰æ»¿è¶³é‚£äº›è¦æ±‚ï¼Ÿï¼

<iframe width="560" height="315" src="https://www.youtube.com/embed/gnupOrSEikQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


## è·Ÿè‘—é«˜æ‰‹ç·´åŠŸ

åƒè€ƒé«˜æ‰‹å·²å®Œæˆçš„å¯¦ä½œæ¡ˆä¾‹ï¼Œå¿«é€Ÿå­¸ç¿’å¯¦å‹™æ–¹é¢ï¼Œåœ¨ã€Œè¨­å®šã€ä¸Šçš„ How-to ã€‚

 - [**A Complete Guide for Installing and Setting up Neovim for Python Development**](https://jdhao.github.io/2018/12/24/centos_nvim_install_use_guide_en/)

     ::: tip ã€é™„è¨»ã€‘ï¼š 
     ä»¥ä¸Šæ–‡ç« ï¼Œå€‹äººå·²å®Œæˆå¯¦ç¿’ï¼Œä¸¦å°‡ Nvim è¨­å®šæª”ï¼ˆ **init.vim** ï¼‰çš„å…§å®¹æŠ„éŒ„æ–¼ä¸‹æ–¹ï¼Œä¾›æœ‰èˆˆè¶£çš„æœ‹å‹åƒè€ƒä¹‹ç”¨ã€‚
     :::

 - [**Setup Neovim for Python**](https://jdhao.github.io/2018/12/24/centos_nvim_install_use_guide_en/)

 - [**ä½¿ç”¨ neovim æ‰“é€ ä¸€å€‹ç¾ä»£åŒ–çš„ç·¨è¼¯å–®**](http://liaoph.com/modern-vim/)

 - [**VSCode-like envirnoment with vim + tmux**](https://blog.inkdrop.info/vscode-like-environment-with-vim-tmux-4c2bfe17d31e)



## åŸºç¤æ‰“åº•

å› ç‚ºå° Vim æˆ– Tmux ï¼Œã€Œæœ‰é»ç†Ÿä½†ä¸æ˜¯å¾ˆç†Ÿ ã€çš„æœ‹å‹ï¼Œæœ‰äº›ã€Œå°ˆæœ‰åè©ã€ã€ã€Œæ“ä½œæ¦‚å¿µã€é‚„ç„¡æ³•å…¨æŒæ¡è€…ï¼Œå¯åƒè€ƒä»¥ä¸‹è³‡æ–™ï¼Œç·´å¥½åŸºæœ¬åŠŸï¼Œç‚ºå¯¦åŠ›ç´®åŸºç¤ã€‚


### ğŸ–² Python é–‹ç™¼è€…ä½¿ç”¨éœ€æ±‚

<iframe width="560" height="315" src="https://www.youtube.com/embed/vlb3qUiS2ZY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


### ğŸ–² ä½•è¬‚ Syntax Highlighting

<iframe width="560" height="315" src="https://www.youtube.com/embed/P5US8U8-KmA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


### ğŸ–² [Copy and Paste for tmux & vim on Linux](http://squidarth.com/programming/2018/12/14/tmux-linux.html)


### ğŸ–² [ä½¿ç”¨ Linux çš„ AppImage æª”æ¡ˆåœ¨ Ubuntu 18.04 å®‰è£ Nvim](https://github.com/neovim/neovim/releases/tag/v0.4.3)



## å€‹äººå¯¦ä½œæˆå“åƒè€ƒ

ä»¥ä¸‹ä¹‹ã€Œè¨­å®šæª”ã€ï¼Œæ–¼ Ubuntu 18.04 ä½œæ¥­ç³»çµ±å®Œæˆå¯¦ä½œã€‚


### Nvim è¨­å®šæª”ï¼ˆï½/.config/nvim/init.vim)
    "--------------------------------------------------------------
    " æ“´å……å¥—ä»¶ï¼ˆPluginsï¼‰
    "--------------------------------------------------------------
    
    call plug#begin('~/.local/share/nvim/plugged')
    
    " åœç”¨æ“´å……å¥—ä»¶
    " Plug 'davidhalter/jedi-vim', { 'on': []}
    
    " ç¨‹å¼èªè¨€ã€€auto-completion
    Plug 'Shougo/deoplete.nvim', { 'do': ':UpdateRemotePlugins' }
    Plug 'davidhalter/jedi-vim'
    
    " ç‹€æ…‹æŒ‡ç¤ºåˆ—
    Plug 'vim-airline/vim-airline'
    Plug 'vim-airline/vim-airline-themes'
    
    " è‡ªå‹•é…å°
    Plug 'jiangmiao/auto-pairs'
    
    " è¨»é‡‹
    Plug 'scrooloose/nerdcommenter'
    
    " è‡ªå‹•èª¿æ•´æ’ç‰ˆæ ¼å¼
    " pip install yapf
    Plug 'sbdchd/neoformat'
    
    " è‡ªå‹•é¡¯ç¤ºå®šç¾©è™•(Code Jump)
    Plug 'davidhalter/jedi-vim'
    
    " æª”æ¡ˆé¡¯ç¤ºç®¡ç†
    Plug 'scrooloose/nerdtree'
    
    " ç¨‹å¼ç¢¼æª¢æ ¸
    " pipenv install pylint
    Plug 'neomake/neomake'
    
    " å¤šæ¸¸æ¨™ç·¨è¼¯
    Plug 'terryma/vim-multiple-cursors'
    
    " é«˜äº®åº¦æ¨™ç¤ºè¢«è¤‡è£½çš„æ–‡å­—
    Plug 'machakann/vim-highlightedyank'
    
    " æŠ˜ç–Šï¼é–‹å±•ç¨‹å¼ç¢¼
    Plug 'tmhedberg/SimpylFold'
    
    " ä½ˆæ™¯ï¼ˆThemeï¼‰
    Plug 'morhetz/gruvbox'
    Plug 'joshdick/onedark.vim'
    Plug 'itchyny/lightline.vim'
    Plug 'sheerun/vim-polyglot'
    
    call plug#end()
    
    
    "--------------------------------------------------------------
    " ç³»çµ±è¨­å®š
    "--------------------------------------------------------------
    
    " è¨­å®š <Leader> éµ
    let g:mapleader = ","
    let mapleader = ","
    set timeout timeoutlen=1500
    
    set clipboard=unnamedplus
    
    " å¯ç”¨æ»‘é¼ æ“ä½œ
    set mouse=a
    
    " é¡¯ç¤ºã€Œè¡Œæ¨™ã€
    set cursorline
    
    " é›¢é–‹æ’å…¥æ¨¡å¼ï¼Œå›è¿”ä¸€èˆ¬æ¨¡å¼
    imap jj <Esc>
    
    " è¨­å®šã€”è¡Œè™Ÿã€•é¡¯ç¤ºæ¨¡å¼
    set number                  " é¡¯ç¤ºè¡Œè™Ÿ
    set relativenumber          " åœ¨éŠæ¨™æ‰€åœ¨è™•é¡¯ç¤ºç›¸å°è¡Œè™Ÿ
    
    " è®Šæ›´è¡Œè™Ÿé¡¯ç¤ºæ¨¡å¼
    nmap <leader>nu :set number<CR>             " :set nu
    nmap <leader>n! :set nonumber<CR>           " :set nu!
    nmap <leader>NU :set relativenumber<CR>     " :set rnu
    nmap <leader>N! :set norelativenumber<CR>   " :set nornu
    
    
    "--------------------------------------------------------------
    " æª”æ¡ˆä½œæ¥­
    
    " åœç”¨ backup èˆ‡ swap åŠŸèƒ½
    set nobackup
    set nowritebackup
    set noswapfile
    
    " Automatically re-read file if a change was detected outside of vim
    set autoread
    
    
    " ç·¨è¼¯è¨­å®šæª”
    nmap <Leader>i :tabnew ~/.config/nvim/init.vim<CR>
    
    " ä¾æ“šè¨­å®šæª”é‡å•Ÿè¨­å®š
    nmap <Leader>I :source ~/.config/nvim/init.vim<CR>
    
    
    " å„²å­˜æª”æ¡ˆ
    nmap <Leader>w :w<CR>
    imap <Leader>w :w<CR>
    vmap <Leader>w :w<CR>
    nnoremap fs :w<CR>
    
    
    " Allows you to save files you opened without write permissions via sudo
    cmap w!! w !sudo tee %
    
    
    " é—œé–‰ç›®å‰æ­£ç·¨è¼¯çš„æª”æ¡ˆ
    map fc :bd<CR>      " å·²å­˜æª”
    map fC :bd!<CR>     " å·²ç·¨è¼¯ï¼Œä¸å­˜æª”ï¼Œå¼·è¿«é—œé–‰
    
    
    " é€€å‡º Vim
    noremap <Leader>e :quit<CR>  " Exit current window
    noremap <Leader>E :qa!<CR>   " Exit all windows
    nnoremap <Leader>Q  :qa!<CR>
    
    
    "--------------------------------------------------------------
    " Tabs and spaces handling
    set smarttab
    set cindent
    set tabstop=2
    set shiftwidth=2
    set softtabstop=2
    set shiftround
    set expandtab               " always uses spaces instead of tab characters
    
    
    " æ–‡å­—æœå°‹ï¼šSerach configuration
    set ignorecase              " æœå°‹æ™‚æ€±ç•¥è‹±æ–‡å­—æ¯çš„å¤§å°å¯«
    set smartcase               " turn on smartcase
    set incsearch
    set hlsearch                " highlight search results
    
    
    
    "--------------------------------------------------------------
    " ç³»çµ±è¨­å®š
    "--------------------------------------------------------------
    
    " Enable deoplete plugin
    let g:python3_host_prog = "/home/web_admin/.pyenv/shims/python"
    
    "
    " ç¨‹å¼èªè¨€ã€€auto-completion
    "
    let g:deoplete#enable_at_startup = 1
    
    " automatically close the method preview window
    autocmd InsertLeave, CompleteDone * if pumvisible() == 0 | pclose | endif
    
    " Navigate through the auto-completion list with Tab key
    inoremap <expr><tab> pumvisible() ? "\<c-n>" : "\<tab>"
    
    "
    " ç‹€æ…‹æŒ‡ç¤ºåˆ—
    "
    let g:airline_theme='luna'
    
    
    "
    " è‡ªå‹•èª¿æ•´æ’ç‰ˆæ ¼å¼
    "
    
    " Vim Command
    " :Neoformat! [python [yapf]]
    
    " Enable alignment
    let g:neoformat_basic_format_align = 1
    
    " Enable tab to spaces conversion
    let g:neoformat_basic_format_retab = 1
    
    " Enable trimming of trailing whitespace
    let g:neoformat_basic_format_trim = 1
    
    " Run a formatter on save
    augroup fmt
      autocmd!
      autocmd BufWritePre * undojoin | Neoformat
    augroup END
    
    
    "
    " è‡ªå‹•é¡¯ç¤ºå®šç¾©è™•(Code Jump)
    "
    
    " Move the cursor to the class or method you want to check, then press the various supported shortcut provided by jedi-vim:
    "
    " - <leader>d: go to definition
    " - K:         check documentation of class or method
    " - <leader>n: show the usage of a name in current file
    " - <leader>r: rename a name
    
    " disable autocompletion, cause we use deoplete for completion
    let g:jedi#completions_enabled = 0
    
    " open the go-to function in split, not another buffer
    let g:jedi#use_splits_not_buffers = 'right'
    
    
    "
    " æª”æ¡ˆé¡¯ç¤ºç®¡ç†
    "
    
    " Vim Command: NERDTree
    " OP Ref: https://jdhao.github.io/2018/09/10/nerdtree_usage/
    " - Open a file in the file explorer: <o>
    " - Switch betwen file window and nerdtree file navigation window:
    "     (a) <C-w><C-w>
    "     (b) <C-w><L>
    " - close file explorer window:
    "     (a) <q> on file explorer window
    "     (b) Vim Command: NERDTreeClose
    
    " Open the NerdTree window when start up Nvim, but put the cursor in the file-editing window
    autocmd VimEnter * NERDTree | wincmd p
    
    " Sublime Text likeï¼š Open side bar
    nnoremap <silent> <C-k><C-b> :NERDTreeToggle<CR>
    
    
    "
    " ç¨‹å¼ç¢¼æª¢æ ¸
    "
    " Vim Command:
    "  - Neomake: Manually start syntax checking
    "  - lwindow / lopen: Navigate them using the buil-in methods
    "  - lprev / lnext : Go back and forth
    "
    "  pylint --generate-rcfile > ~/.pylintrc
    "  Usage Ref: https://stackoverflow.com/questions/4341746/how-do-i-disable-a-pylint-warning/23542817#23542817
    
    let g:neomake_python_enabled_makers = ['pylint']
    
    " Open the list automatically
    let g:neomake_open_list = 2
    
    " enable automatical code check: normal mode (after 1s; no delay when writing)
    call neomake#configure#automake('nrwi', 500)
    
    
    "
    " å¤šæ¸¸æ¨™ç·¨è¼¯
    "
    " (1) move the cursor to a variable you want to rename
    " (2) press <C-n> to enter multiple cursor ediiting mode and let variable to be highlighted
    " (3) if a occurance want to skip, press <C-x>
    " (4) press <c> (meands to change) and enter insert mode. Input a new name.
    " (5) press <ESC> to exit multiple cursor editting mode
    
    
    "
    " é«˜äº®åº¦æ¨™ç¤ºè¢«è¤‡è£½çš„æ–‡å­—
    "
    
    highlight HighlightedyankRegion cterm=reverse gui=reverse
    
    " set highlight duration time to 1000 ms, i.e., 1 second
    let g:highlightedyank_highlight_duration = 1000
    
    
    "
    " æŠ˜ç–Šï¼é–‹å±•ç¨‹å¼ç¢¼
    "
    
    " - zoï¼š Open fold in current cursor postion
    " - zOï¼š Open fold and sub-fold in current cursor postion recursively
    " - zcï¼š Close the fold in current cursor position
    " - zCï¼š Close the fold and sub-fold in current cursor position recursively
    
    let g:SimpylFold_docstring_preview = 1
    let g:SimpylFold_fold_docstring = 0
    let g:SimpylFold_fold_import = 0
    
    
    "
    " ä½ˆæ™¯ï¼ˆThemeï¼‰
    "
    
    " support true color
    set notermguicolors
    
    " airline theme
    set laststatus=2
    if !has('gui_running')
      set t_Co=256
    endif
    set noshowmode
    let g:lightline = {
          \ 'colorscheme': 'wombat',
          \ }
    
    let g:airline_theme='tomorrow'
    
    " gruvbox theme
    colorscheme gruvbox
    set background=dark
    "set background=light
    
    "" onedark theme
    "let g:onedark_hide_endofbuffer = 0
    "let g:onedark_termcolors = 256
    
    "" onedark#extend_highlight
    "if (has("autocmd"))
    "augroup colorextend
    "autocmd!
    "" Make `Function`s bold in GUI mode
    "autocmd ColorScheme * call onedark#extend_highlight("Function", { "gui": "bold" })
    "" Override the `Statement` foreground color in 256-color mode
    "autocmd ColorScheme * call onedark#extend_highlight("Statement", { "fg": { "cterm": 128 } })
    "" Override the `Identifier` background color in GUI mode
    "autocmd ColorScheme * call onedark#extend_highlight("Identifier", { "bg": { "gui": "#333333" } })
    "augroup END
    "endif
    
    "" onedark#set_highlight
    "" onedark.vim override: Don't set a background color when running in a terminal;
    "" just use the terminal's background color
    "" `gui` is the hex color code used in GUI mode/nvim true-color mode
    "" `cterm` is the color code used in 256-color mode
    "" `cterm16` is the color code used in 16-color mode
    "if (has("autocmd") && !has("gui_running"))
    "augroup colorset
    "autocmd!
    "let s:white = { "gui": "#ABB2BF", "cterm": "145", "cterm16" : "7" }
    "autocmd ColorScheme * call onedark#set_highlight("Normal", { "fg": s:white }) " `bg` will not be styled since there is no `bg` setting
    "augroup END
    "endif
    
    """ Global color overrides
    "let g:onedark_color_overrides = {
          "\ "black": {"gui": "#2F343F", "cterm": "235", "cterm16": "0" },
          "\ "purple": { "gui": "#C678DF", "cterm": "170", "cterm16": "5" }
    "\}
    
    "syntax on
    "colorscheme onedark
    
    
    "
    " Builtin terminal
    "
    
    " To open the terminal:
    "  (A) :terminal
    "  (B) :vnew term://bash
    "  (C) :new term://bash
    "
    " Entering the terminal emulator: Press <i> to start typing terminal command
    "
    " To exit terminal commad: Press <C-\><C-n>
    "
    " To exit terminal emulator: exit<Enter>
    



### Tmux è¨­å®šæª”ï¼ˆï½/.tmux.confï¼‰
    # https://tmuxguide.readthedocs.io/en/latest/tmux/tmux.html#tmux-conf
    
    #========================================================
    # Tmux Plugins
    #========================================================
    
    # Tmux Plugin Manager
    if "test ! -d ~/.tmux/plugins/tpm" \
         "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && ~/.tmux/plugins/tpm/bin/install_plugins'"
    
    # List of plugins
         set -g @plugin 'tmux-plugins/tpm'
         set -g @plugin 'tmux-plugins/tmux-sensible'
    
    # Session save and restore
    #  - continuous saving of tmux environment
    #  - automatic tmux start when computer/server is turned on
    #  - automatic restore when tmux is started
         set -g @plugin 'tmux-plugins/tmux-resurrect'
         set -g @plugin 'tmux-plugins/tmux-continuum'
    
         set -g @plugin 'tmux-plugins/tmux-yank'
         set -g default-command "reattach-to-user-namespace -l $SHELL"
    
         set -g @resurrect-strategy-vim 'session'
    
    # Other examples:
    # set -g @plugin 'github_username/plugin_name'
    # set -g @plugin 'git@github.com/user/plugin'
    # set -g @plugin 'git@bitbucket.com/user/plugin'
    
    # Tmux Powerline theme
         set -g @plugin 'jooize/tmux-powerline-theme'
    
    
    #========================================================
    # Tmux Configuration
    #========================================================
    
    # unbind default prefix and set it to ctrl-a
         set -g prefix C-t
         unbind C-b
         bind C-t send-prefix
    
    # make delay shorter
         set -sg escape-time 0
    
    # Automatic restore session
         set -g @continuum-restore 'on'
    
    # history size
         set -g history-limit 10000
    
    # enable mouse support for switching panes/windows
         set -g mouse on
    
    ### other optimization
    
    # display things in 256 colors
    # set -g default-terminal "xterm-256color"
    # set -ga terminal-overrides ",xterm-256color:Tc"
    
    # tell Tmux that outside terminal supports true color
         set -g default-terminal "screen-256color"
         set -ga terminal-overrides ",xterm-256color*:Tc"
    
    # stop auto renaming
         setw -g automatic-rename off
         set-option -g allow-rename off
    
    # renumber windows sequentially after closing
         set -g renumber-windows on
    
    # window notifications; display activity on other window
         setw -g monitor-activity on
         set -g visual-activity on
    
    
    #
    # Status Line
    #
    
    # Status Line Format
         set-window-option -g status-left ""
         set-window-option -g status-right "#[fg=white,bg=colour88] #S #[fg=colour231,bg=colour240] #H #[fg=black,bg=colour252,nobold] %b %d %a #[bold]%H:%M"
    
    # default status bar colors
         set -g status-fg colour240
         set -g status-bg colour233
    
    # default window title colors
         set-window-option -g window-status-style fg=colour220
         set-window-option -g window-status-style bg=default
    
    #
    # Status bar window in background (not active)
    #
    # set-window-option -g window-status-format "#I #W "
    
         set-window-option -g window-status-style dim
         set-window-option -g window-status-style bg=colour240
         set-window-option -g window-status-style fg=colour231
    
    #
    # Status bar window currently active
    #
    # set-window-option -g window-status-current-format "#I #W "
    
    # active window title colors
         set-window-option -g window-status-current-style bright
         set-window-option -g window-status-current-style bg=colour68
         set-window-option -g window-status-current-style fg=colour220
    
    
    #========================================================
    # Key bindings
    #========================================================
    
    # reload config file
         bind r source-file ~/.tmux.conf \; display-message "Config reloaded..."
    
    # quickly open a new window
         bind N new-window
    
    # synchronize all panes in a window
         bind y setw synchronize-panes
    
    # "|" splits the current window vertically, and "-" splits it horizontally
         unbind %
         bind | split-window -h
         bind - split-window -v
    
    # Pane navigation (vim-like)
         bind h select-pane -L
         bind j select-pane -D
         bind k select-pane -U
         bind l select-pane -R
    
    # Pane resizing
         bind -r Left  resize-pane -L 4
         bind -r Down  resize-pane -D 4
         bind -r Up    resize-pane -U 4
         bind -r Right resize-pane -R 4
    
    # Move window
         bind-key S-Left swap-window -t -1
         bind-key S-Right swap-window -t +1
    
    # Cycle prev/next pane
    # bind -n S-Left  select-pane -t :.-
    # bind -n S-Right select-pane -t :.+
    # bind -n C-n     select-pane -t :.+
    
    # Open current directory
         bind f run-shell "open #{pane_current_path}"
    
    #### copy mode : vim ####
    
         bind P paste-buffer
    
    # set vi mode for copy mode
         setw -g mode-keys vi
    
    # Setup 'v' to begin selection as in Vim
         bind -T copy-mode-vi 'v' send-keys -X begin-selection
    
    # Copy to tmux buffer
    # For binding 'y' to copy and exiting selection mode
         bind -T copy-mode-vi 'y' send-keys -X copy-pipe-and-cancel "xclip -sel clip -i"
    
    # Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
         run -b '~/.tmux/plugins/tpm/tpm'

